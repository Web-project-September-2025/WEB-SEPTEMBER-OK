<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ανάθεση Θέματος σε Φοιτητή</title>
  <link rel="stylesheet" href="styles/main.css" />

  <style>
    /* --- Γενικά wrapper --- */
    .assign-topic .page-below-line{
      max-width:1100px;
      margin:0 auto 48px;
      padding:0 16px;
      position:relative;
    }

    /* Η γραμμή να είναι κάτω από τις κάρτες (οπτικά) */
    .overlay-logo .top-line{
      position:relative;
      z-index:1;
    }

    /* --- Search box: στο απόλυτο κέντρο --- */
    .assign-topic .search-wrap{
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:min(880px,calc(100vw - 32px));
      z-index:10;            /* επάνω από όλα, μέχρι να κρυφτεί */
      padding:0 16px;
    }
    .assign-topic .card{
      position:relative;     /* ώστε να ισχύει z-index */
      z-index:2;             /* κάρτες πάνω από τη γραμμή */
      background:rgba(0,0,0,0.48);
      border-radius:14px;
      padding:22px;
      backdrop-filter:blur(2px);
      box-shadow:0 6px 18px rgba(0,0,0,0.25);
      width:100%;
    }

    /* --- Τα panels (μετά την επιλογή φοιτητή) ξεκινούν ΚΑΤΩ από τη γραμμή --- */
    :root{ --below-line-offset: 240px; } /* default, θα αντικατασταθεί δυναμικά */
    .assign-topic #assignWrap{
      display:none;
      margin-top: var(--below-line-offset);
      position:relative;
      z-index:2;  /* πάνω από τη γραμμή */
    }

    /* Grid για τα δύο panels */
    .assign-topic .grid-2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:22px;
    }
    @media (max-width: 900px){
      .assign-topic .grid-2{ grid-template-columns:1fr; }
    }

    .assign-topic .panel{
      background:rgba(255,255,255,0.06);
      border-radius:12px;
      padding:16px;
      box-shadow:inset 0 0 0 1px rgba(255,255,255,0.06);
      min-height:180px;
    }
    .assign-topic .section-title{ margin:0 0 10px; font-weight:700; font-size:20px; }
    .assign-topic .topic-item{
      background:rgba(255,255,255,0.06);
      border-radius:10px;
      padding:10px 12px;
      margin-bottom:10px;
    }
    .assign-topic .pill{
      display:inline-block;
      padding:2px 8px;
      border-radius:9999px;
      font-size:12px;
      background:#eee; color:#111; line-height:20px; margin-left:6px; vertical-align:middle;
    }
    .assign-topic .btn-row{ margin-top:10px; }
    .assign-topic .btn-small.danger{ background:#a53131; }

    /* --- Modal --- */
    .modal{
      position:fixed!important; inset:0; display:none;
      align-items:center; justify-content:center;
      background:rgba(0,0,0,0.55); z-index:9999;
    }
    .modal .modal-content{
      background:#1f1f1f; color:#fff; border-radius:12px; padding:20px;
      min-width:280px; max-width:90vw; box-shadow:0 10px 30px rgba(0,0,0,0.6);
    }
    .modal .modal-actions{ display:flex; gap:10px; margin-top:12px; }

    /* === HEADER πιο ψηλά (λογότυπο, τίτλος, γραμμή) === */
.assign-topic .overlay-logo { 
  position: fixed;        /* για σιγουριά */
  top: 8px !important;    /* ΜΙΚΡΟΤΕΡΟ = πιο ψηλά */
  left: 40px;
  z-index: 5;
}
.assign-topic .overlay-logo .top-line {
  margin-top: 8px !important;  /* ΜΙΚΡΟΤΕΡΟ = πιο κοντά στο logo */
}

.assign-topic .top-right-title {
  position: fixed;        /* για σιγουριά */
  top: 10px !important;   /* ΜΙΚΡΟΤΕΡΟ = πιο ψηλά */
  right: 40px;
  z-index: 5;
}

/* === ΤΑ ΠΛΑΙΣΙΑ πιο χαμηλά === */
/* Ανεβάζεις/κατεβάζεις ΜΟΝΟ αυτόν τον αριθμό. Μεγαλύτερο = πιο κάτω */
.assign-topic #assignWrap {
  margin-top: 300px !important; /* π.χ. 300–360px ανάλογα με το πόσο κάτω τα θες */
  position: relative;
  z-index: 2;                    /* πάνω από τη γραμμή */
}

/* (προαιρετικό) Αν δεις επικάλυψη με τη γραμμή, δώσε και ένα φόντο/σκιά στα panels */
.assign-topic .card { 
  z-index: 2; 
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
}
  </style>

  <script defer src="assign-topic.js"></script>
  <script>
    // Υπολογίζει δυναμικά το ύψος μέχρι το ΚΑΤΩ άκρο της οριζόντιας γραμμής
    // και σπρώχνει τα panels ώστε να ξεκινούν από κάτω.
    function setPanelsOffset(){
      const line = document.querySelector('.top-line');
      if(!line) return;
      const rect = line.getBoundingClientRect();
      // Απόσταση από το πάνω μέρος του viewport μέχρι το κάτω άκρο της γραμμής + λίγο κενό
      const offsetPx = Math.max(160, Math.round(rect.bottom + 24));
      document.documentElement.style.setProperty('--below-line-offset', offsetPx + 'px');
    }
    window.addEventListener('DOMContentLoaded', setPanelsOffset);
    window.addEventListener('resize', setPanelsOffset);
  </script>
</head>
<body class="assign-topic">

  <!-- Logo & γραμμή -->
  <div class="overlay-logo">
    <img src="images/logo.png" alt="logo" class="logo" />
    <div class="top-line"></div>
  </div>

  <!-- Τίτλος πάνω δεξιά -->
  <div class="top-right-title">
    <h2>Ανάθεση Θέματος σε Φοιτητή</h2>
  </div>

  <div class="page-below-line">
    <!-- Αναζήτηση (κεντραρισμένη) -->
    <div id="searchWrap" class="search-wrap">
      <section class="card">
        <h3>Αναζήτηση Φοιτητή</h3>
        <form id="searchStudentForm" style="display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap;">
          <div style="flex:1 1 320px; min-width:260px;">
            <label for="searchInput">ΑΜ ή Ονοματεπώνυμο:</label><br/>
            <input type="text" id="searchInput" name="searchInput" required />
          </div>
          <div><button type="submit" class="btn-small">Αναζήτηση</button></div>
        </form>
        <div id="studentMatches" style="margin-top:12px;"></div>
        <div id="studentInfo" style="margin-top:6px; opacity:.9;"></div>
      </section>
    </div>

    <!-- Μετά την επιλογή φοιτητή -->
    <div id="assignWrap">
      <section class="card">
        <div class="grid-2">
          <div class="panel">
            <h3 class="section-title">Διαθέσιμα Θέματα <span class="pill">UNDER-ASSIGNMENT</span></h3>
            <div id="availableTopicsList"></div>
          </div>
          <div class="panel">
            <h3 class="section-title">Προσωρινά Ανατεθειμένα στον Φοιτητή</h3>
            <div id="provisionalList"></div>
            <div class="btn-row"><button id="cancelAllBtn" class="btn-small" style="display:none;">Ακύρωση Όλων</button></div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Modal -->
  <div id="confirmModal" class="modal">
    <div class="modal-content">
      <p id="confirmModalText"></p>
      <div class="modal-actions">
        <button id="confirmYesBtn" class="btn-small">Ναι</button>
        <button id="confirmNoBtn" class="btn-small">Όχι</button>
      </div>
    </div>
  </div>

</body>
</html>
